<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description"
    content="Innovation, Design, Development, Coding, Programming, Traninig, TechCamp, TechCamp 2024, TechCamp 2024 Registration, Registration Form Online" />
  <meta name="author" content="TechCamp" />
  <title>TechCamp 2024 - Register</title>
  <!-- loader-->
  <!--<link href="assets/css/pace.min.css" rel="stylesheet"/>
  <script src="assets/js/pace.min.js"></script>-->
  <!--favicon-->
  <link rel="icon" href="assets/images/logo.png" type="image/x-icon">
  <link href="css/buttons.css" rel="stylesheet" />
  <!-- notifications css -->
  <link rel="stylesheet" href="assets/plugins/notifications/css/lobibox.min.css" />
  <!-- Bootstrap core CSS-->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
  <!-- animate CSS-->
  <link href="assets/css/animate.css" rel="stylesheet" type="text/css" />
  <!-- Icons CSS-->
  <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
  <!-- Custom Style-->
  <link href="assets/css/app-style.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">

  <style>
    body {
      background-color: #fff;
      /*background-image:url(assets/images/home_business_slider_bg-2.jpg); */
      background-repeat: no-repeat;
      background-position: center top;
      background-attachment: fixed;
      background-size: cover;
      -webkit-background-size: cover;


    }

    .dataTables_wrapper {
      width: 100%;
      overflow-x: auto;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }

    #manageModal {
      display: none;
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      width: 100%;
      max-width: 600px;
      /* Increased width */
      max-height: 80vh;
      /* Max height for vertical scrolling */
      overflow-y:scroll;
      /* Enable vertical scrolling */
    }

    #modalOverlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
  </style>
</head>

<body>
  <!-- Start wrapper-->
  <div class="flex" style="overflow-x: hidden;">
    <img src="assets/images/unleash-your-inner-innovator.jpg" style="width: 100%;" />

    <div class="row">

      <div class="col-12" style="width:100%; margin-top: 20px;">
        <div class="card-body">
          <div class="card-content">
            <div class="card-title text-uppercase text-center text-primary">REGISTERED MEMBERS</div>
            <div id="modalOverlay"></div>
            <table id="registrationTable" class="display nowrap" style="width:100%">
              <thead>
                <tr>
                  <th>SN</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Club 1</th>
                  <th>Club 2</th>
                  <th>Comment</th>
                  <th>Manage</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>

            <!-- Modal HTML -->
            <div id="manageModal">
              <form id="manageForm">
                <input type="hidden" id="entryId">
                <div class="form-group">
                  <label for="fname">Name:</label>
                  <input type="text" id="modalFname" name="fname">
                </div>
                <div class="form-group">
                  <label for="email">Email:</label>
                  <input type="email" id="modalEmail" name="email">
                </div>
                <div class="form-group">
                  <label for="phone">Phone:</label>
                  <input type="text" id="modalPhone" name="phone">
                </div>
                <div class="form-group">
                  <label for="club1">Club 1:</label>
                  <select id="modalClub1" name="club1" class="form-control single-select club">
                    <option value="">- Choose Club (1st Choice) -</option>
                    <option value="Coding Club">Coding Club</option>
                    <option value="Electronics & Robotics Club">Electronics & Robotics Club</option>
                    <option value="Network & Hardware Engineering Club">Network & Hardware Engineering Club</option>
                    <option value="Photography & Printing Club">Photography & Printing Club</option>
                    <option value="CyberSecurity Club">CyberSecurity Club</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="club2">Club 2:</label>
                  <select id="modalClub2" name="club2" class="form-control single-select club">
                    <option value="">- Choose Club (2nd Choice) -</option>
                    <option value="Coding Club">Coding Club</option>
                    <option value="Electronics & Robotics Club">Electronics & Robotics Club</option>
                    <option value="Network & Hardware Engineering Club">Network & Hardware Engineering Club</option>
                    <option value="Photography & Printing Club">Photography & Printing Club</option>
                    <option value="CyberSecurity Club">CyberSecurity Club</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="comment">Comment:</label>
                  <textarea id="modalComment" name="comment"></textarea>
                </div>
                <button type="submit">Update</button>
                <iframe id="ifmimg" class="ifmimg" src="option-banner2.html" scrolling="no" frameborder="0"
                  style="background:url('assets/images/ajax-loader.gif') center center no-repeat; width:100%; height: 800px; "></iframe>
                  <br/><br/>

              </form>
            </div>



          </div>
          <br /><br />

        </div>



      </div>

    </div>

    <!-- <img src="assets/images/TechCamp-2024+Banner.jpg" style="width: 100%; margin-bottom:70px;" /> -->

    <a href="javaScript:void();" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
    <!--End Back To Top Button-->



  </div><!--wrapper-->
  <div class="w-100 pt-3 pb-1 pr-2 pl-2 bg-white"
    style="position:fixed; bottom:0px; z-index:999; color:#000 !important;" align="center">
    <p>TechCamp &copy; 2024 (Summer). All rights reserved. <br />
      <span style="font-size: 10px;"> Powered by: Quantum Cloud </span>
    </p>
  </div>

  <!-- Bootstrap core JavaScript-->
  <!-- <script src="assets/js/jquery.min.js"></script> -->
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>

  <!-- sidebar-menu js -->
  <!-- <script src="assets/js/sidebar-menu.js"></script> -->

  <!-- Custom scripts -->
  <!-- <script src="assets/js/app-script.js"></script> -->
  <!-- <script src="assets/js/main.js"></script> -->

  <!--notification js -->
  <!-- <script src="assets/plugins/notifications/js/lobibox.min.js"></script>
  <script src="assets/plugins/notifications/js/notifications.min.js"></script>
  <script src="assets/plugins/notifications/js/notification-custom-script.js"></script> -->

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>
  <script>
    $(document).ready(function () {
      var table = $('#registrationTable').DataTable({
        "ajax": {
          "url": "https://quantumcloud.ng/techcamp2024/api/fetch_registrations",
          "dataType": "jsonp",
          "jsonpCallback": "handleResponse"
        },
        "columns": [
          {
            "data": null,
            "render": function (data, type, row, meta) {
              return meta.row + 1; // Serial number
            }
          },
          { "data": "fname" },
          { "data": "email" },
          { "data": "phone" },
          { "data": "club1" },
          { "data": "club2" },
          { "data": "comment" },
          {
            "data": null,
            "render": function (data, type, row) {
              return '<button class="manageBtn" data-id="' + row.id + '">Manage</button>';
            }
          }
        ],
        "columnDefs": [
          {
            "targets": [6], // Comment column index
            "visible": false
          },
          {
            "targets": [2], // Phone column index
            "visible": false
          }
        ],
        responsive: true,
        scrollX: true
      });

      // Manage button click handler
      $('#registrationTable').on('click', '.manageBtn', function () {
        var entryId = $(this).data('id');
        var rowData = table.row($(this).closest('tr')).data();
        localStorage.dir = entryId;
        localStorage.email = rowData.email;

        // Fill the modal with the data from the row
        $('#entryId').val(entryId);
        $('#modalFname').val(rowData.fname);
        $('#modalEmail').val(rowData.email);
        $('#modalPhone').val(rowData.phone);
        $('#modalClub1').val(rowData.club1);
        $('#modalClub2').val(rowData.club2);
        $('#modalComment').val(rowData.comment);

        // Show the modal and overlay
        $('#modalOverlay').show();
        $('#manageModal').show();
      });

      // Handle form submission for updating entry
      $('#manageForm').on('submit', function (event) {
        event.preventDefault();

        var formData = {
          id: $('#entryId').val(),
          fname: $('#modalFname').val(),
          email: $('#modalEmail').val(),
          phone: $('#modalPhone').val(),
          club1: $('#modalClub1').val(),
          club2: $('#modalClub2').val(),
          comment: $('#modalComment').val()
        };

        $.ajax({
          url: 'https://quantumcloud.ng/techcamp2024/api/update_registration',
          type: 'GET',
          data: formData,
          dataType: 'jsonp',
          jsonpCallback: 'handleUpdateResponse',
          success: function (response) {
            handleUpdateResponse(response);
          },
          error: function (xhr, status, error) {
            alert('Error updating entry. Please try again.');
          }
        });
      });

      $('#modalOverlay').on('click', function () {
        $('#modalOverlay').hide();
        $('#manageModal').hide();
      });
    });

    function handleResponse(response) {
      return response;
    }

    function handleUpdateResponse(response) {
      if (response.status === 'success') {
        alert('Update successful!');
        $('#modalOverlay').hide();
        $('#manageModal').hide();
        $('#registrationTable').DataTable().ajax.reload(); // Reload the table data
      } else {
        alert('Update failed: ' + response.message);
      }
    }
  </script>

</body>

</html>